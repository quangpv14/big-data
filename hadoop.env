############################
# Hive Metastore Configuration
############################

# JDBC URL kết nối đến database dùng cho Hive Metastore
# Ở đây là PostgreSQL service "hive-metastore-postgresql"
HIVE_SITE_CONF_javax_jdo_option_ConnectionURL=jdbc:postgresql://hive-metastore-postgresql/metastore

# Driver JDBC để kết nối PostgreSQL
HIVE_SITE_CONF_javax_jdo_option_ConnectionDriverName=org.postgresql.Driver

# Username để kết nối database
HIVE_SITE_CONF_javax_jdo_option_ConnectionUserName=hive

# Password để kết nối database
HIVE_SITE_CONF_javax_jdo_option_ConnectionPassword=hive

# Tự động tạo schema (ở đây = false → không tự tạo, cần tạo trước)
HIVE_SITE_CONF_datanucleus_autoCreateSchema=false

# URI để Hive Metastore service lắng nghe, client sẽ kết nối qua Thrift
HIVE_SITE_CONF_hive_metastore_uris=thrift://hive-metastore:9083

############################
# Core Hadoop Configuration
############################

# HDFS default filesystem URI
CORE_CONF_fs_defaultFS=hdfs://namenode:8020

# Static user cho HTTP requests (dùng khi không có Kerberos)
CORE_CONF_hadoop_http_staticuser_user=root

# Cho phép user "hue" làm proxy cho tất cả host
CORE_CONF_hadoop_proxyuser_hue_hosts=*

# Cho phép user "hue" proxy cho tất cả group
CORE_CONF_hadoop_proxyuser_hue_groups=*

############################
# HDFS Configuration
############################

# Bật WebHDFS (truy cập HDFS qua HTTP REST API)
HDFS_CONF_dfs_webhdfs_enabled=true

# Tắt permission check trên HDFS (dễ thử nghiệm, không nên dùng prod)
HDFS_CONF_dfs_permissions_enabled=false

############################
# YARN Configuration
############################

# Bật log aggregation: gom log từ NodeManager về HDFS
YARN_CONF_yarn_log___aggregation___enable=true

# Cho phép ResourceManager khôi phục sau restart
YARN_CONF_yarn_resourcemanager_recovery_enabled=true

# Class dùng để lưu state RM vào HDFS
YARN_CONF_yarn_resourcemanager_store_class=org.apache.hadoop.yarn.server.resourcemanager.recovery.FileSystemRMStateStore

# Đường dẫn lưu state của ResourceManager trong HDFS
YARN_CONF_yarn_resourcemanager_fs_state___store_uri=/rmstate

# Thư mục log ứng dụng từ NodeManager
YARN_CONF_yarn_nodemanager_remote___app___log___dir=/app-logs

# URL của HistoryServer để hiển thị log
YARN_CONF_yarn_log_server_url=http://historyserver:8188/applicationhistory/logs/

# Bật timeline service cho tracking ứng dụng
YARN_CONF_yarn_timeline___service_enabled=true

# Bật lưu trữ lịch sử ứng dụng (application history)
YARN_CONF_yarn_timeline___service_generic___application___history_enabled=true

# Bật publish metrics cho ứng dụng
YARN_CONF_yarn_resourcemanager_system___metrics___publisher_enabled=true

# Hostname của ResourceManager
YARN_CONF_yarn_resourcemanager_hostname=resourcemanager

# Hostname của HistoryServer (dùng cho timeline service)
YARN_CONF_yarn_timeline___service_hostname=historyserver

# Địa chỉ ResourceManager chính
YARN_CONF_yarn_resourcemanager_address=resourcemanager:8032

# Địa chỉ Scheduler bên trong RM
YARN_CONF_yarn_resourcemanager_scheduler_address=resourcemanager:8030

# Địa chỉ ResourceTracker cho NodeManager giao tiếp với RM
YARN_CONF_yarn_resourcemanager_resource__tracker_address=resourcemanager:8031
